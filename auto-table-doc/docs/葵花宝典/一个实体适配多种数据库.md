---
title: 常见问题
description:
---

## 一个实体适配多种数据库

### 需求

当我们做产品的时候，客户现场是什么数据库经常是不受我们控制的，因此我们的实体需要能适配多种数据库，比如某个字段MySQL、Pgsql下表现不同。

### 实现

核心思路：使用@AutoColumn注解的dialect属性，指定数据库，声明该注解今生效于指定的数据库，dialect默认为空字符串，表示所有数据库都生效。
如果同时指定多个@AutoColumn注解，需要使用@AutoColumns注解包裹，生效的规则是：外层优先于内层，前面优先于后面。

```java
public  class TestTable {
    
    @ColumnComment("姓名")
    @AutoColumn(length = 300, dialect = DatabaseDialect.MYSQL) // [!code ++]
    private String name;
    
    @ColumnComment("备注")
    @AutoColumns({
            @AutoColumn(type = MysqlTypeConstant.LONGTEXT, dialect = DatabaseDialect.Mysql), // [!code ++]
            @AutoColumn(type = PgsqlTypeConstant.TEXT, dialect = DatabaseDialect.Pgsql) // [!code ++]
    })
    private String remark;
}
```
