import{_ as r,C as u,c as d,a2 as t,m as e,a as l,H as o,o as n}from"./chunks/framework.BqY9dGfj.js";const x=JSON.parse('{"title":"变更日志","description":null,"frontmatter":{"title":"变更日志","description":null},"headers":[],"relativePath":"变更日志.md","filePath":"变更日志.md","lastUpdated":1744959209000}'),h={name:"变更日志.md"},s={id:"_2-1-2",tabindex:"-1"},c={id:"_1-8-3",tabindex:"-1"};function b(m,a,q,g,_,f){const i=u("Badge");return n(),d("div",null,[a[8]||(a[8]=t('<h1 id="变更日志" tabindex="-1">变更日志 <a class="header-anchor" href="#变更日志" aria-label="Permalink to &quot;变更日志&quot;">​</a></h1><h2 id="_2-3-6" tabindex="-1">2.3.6 <a class="header-anchor" href="#_2-3-6" aria-label="Permalink to &quot;2.3.6&quot;">​</a></h2><ul><li>🐛 BUG：修复pgsql的索引排序问题导致的频繁更新索引问题</li></ul><h2 id="_2-3-5-1" tabindex="-1">2.3.5.1 <a class="header-anchor" href="#_2-3-5-1" aria-label="Permalink to &quot;2.3.5.1&quot;">​</a></h2><ul><li>🍊 优化[2.3.5]引入的自定义排序的算法逻辑</li></ul><h2 id="_2-3-5" tabindex="-1">2.3.5 <a class="header-anchor" href="#_2-3-5" aria-label="Permalink to &quot;2.3.5&quot;">​</a></h2><ul><li>🍊 完善字段排序逻辑，@AutoColumn新增sort配置</li></ul><h2 id="_2-3-4" tabindex="-1">2.3.4 <a class="header-anchor" href="#_2-3-4" aria-label="Permalink to &quot;2.3.4&quot;">​</a></h2><ul><li>🍍 优化类型映射相关的逻辑</li></ul><h2 id="_2-3-3" tabindex="-1">2.3.3 <a class="header-anchor" href="#_2-3-3" aria-label="Permalink to &quot;2.3.3&quot;">​</a></h2><ul><li>🐛 修复关于自定义列备注的bug</li><li>🍉 新增配置：<a href="/配置.html#auto-drop-custom-index">auto-drop-custom-index</a>，控制自定义索引是否自动删除</li><li>🫒 配置项：<a href="/配置.html#auto-drop-index">auto-drop-index</a> 由控制删除所有多余的索引，改为了只删除 index-prefix 配置开头的多余索引</li></ul><h2 id="_2-3-2" tabindex="-1">2.3.2 <a class="header-anchor" href="#_2-3-2" aria-label="Permalink to &quot;2.3.2&quot;">​</a></h2><ul><li>🐛 BUG：使用DB模式自定义SQL记录的表名报错<a href="https://gitee.com/dromara/auto-table/issues/IBVQG4" target="_blank" rel="noreferrer">#IBVQG4</a></li></ul><h2 id="_2-3-1" tabindex="-1">2.3.1 <a class="header-anchor" href="#_2-3-1" aria-label="Permalink to &quot;2.3.1&quot;">​</a></h2><ul><li>🐌 优化字段默认值的提取规则</li></ul><h2 id="_2-3-0" tabindex="-1">2.3.0 <a class="header-anchor" href="#_2-3-0" aria-label="Permalink to &quot;2.3.0&quot;">​</a></h2><ul><li>🐌 优化拦截器和监听器，支持注册多个</li><li>🦋 RunStateCallback拆分为RunBeforeCallback、RunAfterCallback两个回调</li><li>🐝 MySQL，索引创建的时候，字段名前后添加`</li><li>🐛 bug修复：MySQL、pgsql的列注释为空的情况下，判断有误</li><li>🐛 bug修复：字段设定为自增的情况下，没有自动判定为非null</li></ul><h2 id="_2-2-1" tabindex="-1">2.2.1 <a class="header-anchor" href="#_2-2-1" aria-label="Permalink to &quot;2.2.1&quot;">​</a></h2><ul><li>🍩 调整solon适配，AutoTablePlugin生命周期优先级</li></ul><h2 id="_2-2-0" tabindex="-1">2.2.0 <a class="header-anchor" href="#_2-2-0" aria-label="Permalink to &quot;2.2.0&quot;">​</a></h2><ul><li>🐠 内部类，原TableBeanUtils改名为TableMetadataHandler</li><li>🐳 内部类原ClassScanner，提升为可定制的抽象父类AutoTableClassScanner，在AutoTableGlobalConfig中可配置</li><li>🐬 对外接口类AutoTableOrmFrameAdapter，改名为AutoTableMetadataAdapter，专职于暴露AutoTableMetadata的构建钩子，方便自定义</li><li>🚑 AutoTableMetadataAdapter（原AutoTableOrmFrameAdapter）的customFieldTypeHandler方法，移动到了JavaTypeToDatabaseTypeConverter的getFieldType</li><li>🚑 AutoTableMetadataAdapter（原AutoTableOrmFrameAdapter）的scannerAnnotations方法，移动到了AutoTableClassScanner的getIncludeAnnotations</li><li>🚑 AutoTableMetadataAdapter（原AutoTableOrmFrameAdapter）getEnumValues改名为getColumnEnumValues</li><li>🚑 AutoTableMetadataAdapter（原AutoTableOrmFrameAdapter）getRealColumnName改名为getColumnName</li><li>🚑 AutoTableMetadataAdapter（原AutoTableOrmFrameAdapter）新增getColumnType、getColumnDefaultValue、isNotNull</li></ul><h2 id="_2-1-4" tabindex="-1">2.1.4 <a class="header-anchor" href="#_2-1-4" aria-label="Permalink to &quot;2.1.4&quot;">​</a></h2><ul><li>💥 新增@AutoIncrement，支持指定非主键字段自增</li></ul><h2 id="_2-1-3" tabindex="-1">2.1.3 <a class="header-anchor" href="#_2-1-3" aria-label="Permalink to &quot;2.1.3&quot;">​</a></h2><ul><li>💥 优化单元测试模块的逻辑，主类不添加@EnableAutoTable的情况下，可以单独使用@EnableAutoTableTest</li></ul><h2 id="_2-1-2-1" tabindex="-1">2.1.2.1 <a class="header-anchor" href="#_2-1-2-1" aria-label="Permalink to &quot;2.1.2.1&quot;">​</a></h2><ul><li>💥 新增solon支持，感谢<a href="https://gitee.com/chengliang4810" target="_blank" rel="noreferrer">@chengliang4810</a></li></ul>',27)),e("h2",s,[a[0]||(a[0]=e("s",null,"2.1.2",-1)),a[1]||(a[1]=l()),o(i,{type:"danger",text:"废弃"}),a[2]||(a[2]=l()),a[3]||(a[3]=e("a",{class:"header-anchor",href:"#_2-1-2","aria-label":'Permalink to "~~2.1.2~~ <Badge type="danger" text="废弃" />"'},"​",-1))]),a[9]||(a[9]=t('<ul><li>💥 <s>新增solon支持，感谢<a href="https://gitee.com/chengliang4810" target="_blank" rel="noreferrer">@chengliang4810</a></s></li></ul><h2 id="_2-1-1" tabindex="-1">2.1.1 <a class="header-anchor" href="#_2-1-1" aria-label="Permalink to &quot;2.1.1&quot;">​</a></h2><ul><li>🐸 新增<code>AutoTableReadyCallback</code>回调接口，发生于AutoTable配置初始化完成尚未执行逻辑之前</li><li>🏝️ 优化了部分代码</li></ul><h2 id="_2-1-0-2" tabindex="-1">2.1.0.2 <a class="header-anchor" href="#_2-1-0-2" aria-label="Permalink to &quot;2.1.0.2&quot;">​</a></h2><ul><li>🐸 优化表是否存在的判断方式，忽略大小写，以兼容H2等数据库的特性</li><li>🐛 修复了H2数据库的部分类型</li><li>🚨 取消了<code>2.1.0</code>对H2数据库的双引号包裹表名、列名、索引名的操作</li><li>🏝️ 优化了部分代码</li></ul><h2 id="_2-1-0-1" tabindex="-1">2.1.0.1 <a class="header-anchor" href="#_2-1-0-1" aria-label="Permalink to &quot;2.1.0.1&quot;">​</a></h2><ul><li>🐛 bug修复：修复一个Mysql下的字符串类型长度错误的bug</li></ul><h2 id="_2-1-0" tabindex="-1">2.1.0 <a class="header-anchor" href="#_2-1-0" aria-label="Permalink to &quot;2.1.0&quot;">​</a></h2><ul><li>💥 索引新增method属性</li><li>🐛 bug修复：注释中的单引号，索引名称中的双引号 引发的sql语句错误问题</li><li>🚨 优化H2数据的建表方式，使用双引号包裹表名、列名、索引名，保证实体与数据库名称一致</li><li>🐛 bug修复：pgsql在update模式中，索引更新异常</li><li>🚑 增加了部分单元测试</li><li>🏝️ 优化了部分其他代码</li></ul><h2 id="_2-0-2" tabindex="-1">2.0.2 <a class="header-anchor" href="#_2-0-2" aria-label="Permalink to &quot;2.0.2&quot;">​</a></h2><ul><li>🐛 bug修复：sqlite字段的增减导致的数据迁移错误 (#IB6JA6)[<a href="https://gitee.com/dromara/auto-table/issues/IB6JA6" target="_blank" rel="noreferrer">https://gitee.com/dromara/auto-table/issues/IB6JA6</a>]</li></ul><h2 id="_2-0-1-1" tabindex="-1">2.0.1.1 <a class="header-anchor" href="#_2-0-1-1" aria-label="Permalink to &quot;2.0.1.1&quot;">​</a></h2><ul><li>🐛 bug修复：2.0.1新增加的modelClass未配置引发的空指针</li></ul><h2 id="_2-0-1" tabindex="-1">2.0.1 <a class="header-anchor" href="#_2-0-1" aria-label="Permalink to &quot;2.0.1&quot;">​</a></h2><ul><li>🐛 bug修复：优化pgsql的数据类型 (#IB65G4)[<a href="https://gitee.com/dromara/auto-table/issues/IB65G4" target="_blank" rel="noreferrer">https://gitee.com/dromara/auto-table/issues/IB65G4</a>]</li><li>🐛 bug修复：pgsql判断表是否存在，兼容分区的表 (#IB57RB)[<a href="https://gitee.com/dromara/auto-table/issues/IB57RB" target="_blank" rel="noreferrer">https://gitee.com/dromara/auto-table/issues/IB57RB</a>]</li><li>🐸 @PrimaryKey的value属性修改为autoIncrement，消除歧义</li><li>🐙 增加auto-table.modelClass配置项，可以指定具体的实体，执行表结构自动维护</li><li>🐳 @AutoTable增加classes属性，等同于auto-table.modelClass，但是优先级更高</li><li>🐉 优化了pgsql建表语句字段的自增描述方式（serial改为了GENERATED ALWAYS AS IDENTITY）</li></ul><h2 id="_2-0-0" tabindex="-1">2.0.0 <a class="header-anchor" href="#_2-0-0" aria-label="Permalink to &quot;2.0.0&quot;">​</a></h2><blockquote><p>（2.*.*版本开始，包名和groupId均改为org.dromara）</p></blockquote><ul><li>🚨 更改基础包名com.tangzc为org.dromara，groupId由com.tangzc改为org.dromara.autotable</li><li>💥 功能等同于版本1.9.7</li></ul><h2 id="_1-9-8" tabindex="-1">1.9.8 <a class="header-anchor" href="#_1-9-8" aria-label="Permalink to &quot;1.9.8&quot;">​</a></h2><ul><li>🐛 bug修复：优化pgsql的数据类型 (#IB65G4)[<a href="https://gitee.com/dromara/auto-table/issues/IB65G4" target="_blank" rel="noreferrer">https://gitee.com/dromara/auto-table/issues/IB65G4</a>]</li><li>🐛 bug修复：pgsql判断表是否存在，兼容分区的表 (#IB57RB)[<a href="https://gitee.com/dromara/auto-table/issues/IB57RB" target="_blank" rel="noreferrer">https://gitee.com/dromara/auto-table/issues/IB57RB</a>]</li></ul><h2 id="_1-9-7" tabindex="-1">1.9.7 <a class="header-anchor" href="#_1-9-7" aria-label="Permalink to &quot;1.9.7&quot;">​</a></h2><ul><li>💥 新增<code>AutoTableFinishCallback</code>回调接口，实现AutoTable执行完成后的回调</li></ul><h2 id="_1-9-6-1" tabindex="-1">1.9.6.1 <a class="header-anchor" href="#_1-9-6-1" aria-label="Permalink to &quot;1.9.6.1&quot;">​</a></h2><ul><li>🐛 hotfix: 修复<code>@EnableAutoTable</code>、<code>@EnableAutoTableTest</code>新增属性basePackages不生效的bug</li></ul><h2 id="_1-9-6" tabindex="-1">1.9.6 <a class="header-anchor" href="#_1-9-6" aria-label="Permalink to &quot;1.9.6&quot;">​</a></h2><ul><li>🐛 修复pgsql数据库类型varchar，不指定长度的情况下，一直更新字段的类型的bug</li><li>🐛 修复sqlite数据库设置时间函数默认值失败的bug</li><li>🔥 <code>@EnableAutoTable</code>、<code>@EnableAutoTableTest</code>增加<code>basePackage</code>属性，优先级高于配置文件</li><li>🐸 改变AutoTable的启动方式，从监听ContextRefreshedEvent事件改为实现CommandLineRunner接口</li><li>🎨 多处代码优化</li></ul><h2 id="_1-9-5" tabindex="-1">1.9.5 <a class="header-anchor" href="#_1-9-5" aria-label="Permalink to &quot;1.9.5&quot;">​</a></h2><ul><li>🐛 修复pgsql数据库的列元数据查询条件不准确的隐患</li><li>🔥 增加了spring的单元测试注解 <a href="/指南/高级/单元测试.html">@EnableAutoTableTest</a></li></ul><h2 id="_1-9-4" tabindex="-1">1.9.4 <a class="header-anchor" href="#_1-9-4" aria-label="Permalink to &quot;1.9.4&quot;">​</a></h2><ul><li>🐛 修复bug：sql记录到数据库的时候，其他库有记录表，但是当前库没有记录表的情况下，当前库不创建记录表的问题</li><li>🐛 修复bug：java9以上，父类存在泛型，报错</li><li>🎄 日志打印优化</li></ul><h2 id="_1-9-3-1" tabindex="-1">1.9.3.1 <a class="header-anchor" href="#_1-9-3-1" aria-label="Permalink to &quot;1.9.3.1&quot;">​</a></h2><ul><li>🐛 修复父类存在多级泛型的类型获取异常问题（该bug由<code>v1.9.3</code>引发）</li></ul><h2 id="_1-9-3" tabindex="-1">1.9.3 <a class="header-anchor" href="#_1-9-3" aria-label="Permalink to &quot;1.9.3&quot;">​</a></h2><ul><li>🪳 删除过期注解<code>@TableName</code> <code>TableComment</code></li><li>🐛 bug修复：父类字段类型是泛型，无法准确获取字段类型</li></ul><h2 id="_1-9-2" tabindex="-1">1.9.2 <a class="header-anchor" href="#_1-9-2" aria-label="Permalink to &quot;1.9.2&quot;">​</a></h2><ul><li>🐛 修复1.9.1引起的bug：pgsql主键索引异常删除</li><li>💥 增补了部分注释</li></ul><h2 id="_1-9-1" tabindex="-1">1.9.1 <a class="header-anchor" href="#_1-9-1" aria-label="Permalink to &quot;1.9.1&quot;">​</a></h2><ul><li>🚨 优化pgsql的索引逻辑，旧逻辑在处理（尤其是删除）索引的时候，不包括非auto_idx前缀的索引，新逻辑包含了全部的索引</li><li>💥 新增注解<a href="/指南/进阶/定义列.html#mysqlcolumnunsigned">@MysqlColumnUnsigned</a>，指定MySQL数字类型不允许负数，其范围从 0 开始</li><li>💥 新增注解<a href="/指南/进阶/定义列.html#mysqlcolumnzerofill">@MysqlColumnZerofill</a>，指定MySQL数字类型在固定长度不足的情况下，进行前置补0</li></ul><h2 id="_1-9-0" tabindex="-1">1.9.0 <a class="header-anchor" href="#_1-9-0" aria-label="Permalink to &quot;1.9.0&quot;">​</a></h2><ul><li>🔥 新增H2数据库的支持</li><li>🎄 优化sql记录模块的逻辑，更方便拓展</li></ul><h2 id="_1-8-4" tabindex="-1">1.8.4 <a class="header-anchor" href="#_1-8-4" aria-label="Permalink to &quot;1.8.4&quot;">​</a></h2><ul><li>🐛 修复自1.8.3引入的<a href="/配置.html#strict-extends">strictExtends</a>配置项，不生效的bug</li></ul>',42)),e("h2",c,[a[4]||(a[4]=e("s",null,"1.8.3",-1)),a[5]||(a[5]=l()),o(i,{type:"danger",text:"废弃"}),a[6]||(a[6]=l()),a[7]||(a[7]=e("a",{class:"header-anchor",href:"#_1-8-3","aria-label":'Permalink to "~~1.8.3~~ <Badge type="danger" text="废弃" />"'},"​",-1))]),a[10]||(a[10]=t('<ul><li><s>💥 添加新的配置项<a href="/配置.html#strict-extends">strictExtends</a> ，子类继承父类的字段的配置，表示是否开启严格继承的模式（只继承public、protected修饰的字段）</s></li></ul><h2 id="_1-8-2" tabindex="-1">1.8.2 <a class="header-anchor" href="#_1-8-2" aria-label="Permalink to &quot;1.8.2&quot;">​</a></h2><ul><li>💥 优化orm的适配器，添加表注释与字段注释的自定义方法 <ol><li>String getTableComment(Class&lt;?&gt; clazz)</li><li>String getColumnComment(Field field, Class&lt;?&gt; clazz)</li></ol></li></ul><h2 id="_1-8-1" tabindex="-1">1.8.1 <a class="header-anchor" href="#_1-8-1" aria-label="Permalink to &quot;1.8.1&quot;">​</a></h2><ul><li>💥 表实体扫描字段规则改版： <ol><li>忽略static、final描述的字段；</li><li>如果是父类中的字段，希望被子类继承用于自动建表，相关字段必须由public或protected修饰。</li></ol></li></ul><h2 id="_1-8-0" tabindex="-1">1.8.0 <a class="header-anchor" href="#_1-8-0" aria-label="Permalink to &quot;1.8.0&quot;">​</a></h2><ul><li>💥 <code>@TableIndex</code>的<code>name()</code>、<code>fields()</code>改为非必填</li><li>💥 索引名称策略优化 <ol><li>优先使用 idx_<code>[表名]</code>_<code>[字段名1]</code>_<code>[字段名2]</code></li><li>若超长(63字符)了，使用 idx_<code>[表名]</code>_<code>[所有字段名连接后的hash值]</code><blockquote><p>注：长度定义63是兼容了pgsql的63字符以及mysql的64字符考虑的，Oracle暂无兼容计划，所以暂不考虑它的30字符长度</p></blockquote></li><li>若仍超长了，使用 idx_<code>[表名+所有字段名连接后的hash值]</code></li></ol></li></ul><h2 id="_1-7-5" tabindex="-1">1.7.5 <a class="header-anchor" href="#_1-7-5" aria-label="Permalink to &quot;1.7.5&quot;">​</a></h2><ul><li>🐛 修复自定义配置实体路径读取不到class的bug，感谢<a href="https://gitee.com/wujin00" target="_blank" rel="noreferrer">@wujin00</a></li><li>💥 添加<a href="/指南/进阶/定义列.html#autocolumn">@AutoColumn</a>注解支持一个注解配置所有<code>@Column*</code>的方式</li></ul><h2 id="_1-7-4" tabindex="-1">1.7.4 <a class="header-anchor" href="#_1-7-4" aria-label="Permalink to &quot;1.7.4&quot;">​</a></h2><ul><li>🐛 修复表注释不断被更新的bug，感谢<a href="https://gitee.com/mxyyyy" target="_blank" rel="noreferrer">@mxyyyy</a></li></ul><h2 id="_1-7-3" tabindex="-1">1.7.3 <a class="header-anchor" href="#_1-7-3" aria-label="Permalink to &quot;1.7.3&quot;">​</a></h2><ul><li>🐛 修复1.7.0版本引发的bug，pgsql在update模式下查询表元数据信息重复的问题</li></ul><h2 id="_1-7-2" tabindex="-1">1.7.2 <a class="header-anchor" href="#_1-7-2" aria-label="Permalink to &quot;1.7.2&quot;">​</a></h2><ul><li>🐛 修复pgsql在同一个数据源不同schema，同名表的错误提示bug</li></ul><h2 id="_1-7-1" tabindex="-1">1.7.1 <a class="header-anchor" href="#_1-7-1" aria-label="Permalink to &quot;1.7.1&quot;">​</a></h2><ul><li>💥 向ORM开放schema的自定义获取方式</li><li>🔥 优化orm适配接口的策略，将默认实现逻辑移入到框架内部，getEnumValues、customFieldTypeHandler增加程序兜底逻辑，getTableName、getTableSchema、getRealColumnName提升默认逻辑的权重，isIgnoreField、isPrimary、isAutoIncrement添加默认实现return false。</li></ul><h2 id="_1-7-0" tabindex="-1">1.7.0 <a class="header-anchor" href="#_1-7-0" aria-label="Permalink to &quot;1.7.0&quot;">​</a></h2><ul><li>🚨 <code>@TableName</code>、<code>@TableComment</code>标记过期；</li><li>🎉 新增<code>@AutoTable</code>，包含了<code>@TableName</code>、<code>@TableComment</code>的能力，同时增加了<code>schema</code>属性，支持schema配置；</li><li>🚨 <code>@TableIndexes</code>、<code>@TableIndex</code>、<code>@MysqlEngine</code>、<code>@MysqlCharset</code> 不再具备激活表自动维护的能力，仅有<code>@AutoTable</code>注解具备激活表自动维护的能力；</li><li>🎨 sql记录变动，文件记录方式，文件名添加schema标识（如果有的话），数据库记录方式，添加<code>tableSchema</code>字段；</li><li>💥 pgsql数据库策略优化，增加了对<code>schema</code>的支持</li><li>🚨 pgsql数据库策略中取消了在表名、字段名、索引名上添加双引号</li><li>🐛 修复包扫描不支持<code>*</code>、<code>**</code> 的匹配bug, 感谢<a href="https://gitee.com/wujin00" target="_blank" rel="noreferrer">@wujin00</a></li></ul><h2 id="_1-6-4" tabindex="-1">1.6.4 <a class="header-anchor" href="#_1-6-4" aria-label="Permalink to &quot;1.6.4&quot;">​</a></h2><ul><li>🚨 优化pom中依赖，取消三方框架的传递，减少jar包冲突问题</li></ul><h2 id="_1-6-0" tabindex="-1">1.6.0 <a class="header-anchor" href="#_1-6-0" aria-label="Permalink to &quot;1.6.0&quot;">​</a></h2><ul><li>📝 代码规注释优化</li></ul><h2 id="_0-0-1-1-6-0" tabindex="-1">0.0.1 - 1.6.0 <a class="header-anchor" href="#_0-0-1-1-6-0" aria-label="Permalink to &quot;0.0.1 - 1.6.0&quot;">​</a></h2><ul><li>缺失记录，待补充</li></ul>',25))])}const k=r(h,[["render",b]]);export{x as __pageData,k as default};
