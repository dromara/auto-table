---
title: ç±»å‹æ˜ å°„
description: Java ç±»å‹åˆ°æ•°æ®åº“ç±»å‹çš„æ˜ å°„è§„åˆ™
---

# ç±»å‹æ˜ å°„

AutoTable ä¼šè‡ªåŠ¨å°† Java ç±»å‹æ˜ å°„ä¸ºå¯¹åº”çš„æ•°æ®åº“ç±»å‹ã€‚

## æ˜ å°„æµç¨‹

```mermaid
flowchart LR
    subgraph java["â˜• Java ç±»å‹"]
        J1["String"]
        J2["Integer"]
        J3["Long"]
        J4["Boolean"]
        J5["LocalDateTime"]
        J6["BigDecimal"]
    end
    
    CORE["ğŸ”„ AutoTable ç±»å‹è½¬æ¢å™¨"]
    
    subgraph db["ğŸ’¾ æ•°æ®åº“ç±»å‹"]
        direction TB
        subgraph mysql["ğŸ¬ MySQL"]
            M1["varchar"]
            M2["int"]
            M3["bigint"]
            M4["bit"]
            M5["datetime"]
            M6["decimal"]
        end
        subgraph pgsql["ğŸ˜ PostgreSQL"]
            P1["varchar"]
            P2["integer"]
            P3["bigint"]
            P4["boolean"]
            P5["timestamp"]
            P6["numeric"]
        end
    end
    
    java --> CORE --> db

    style CORE fill:#6366f1,stroke:#4f46e5,color:#fff
```

## é»˜è®¤æ˜ å°„è§„åˆ™

### é€šç”¨æ˜ å°„

```mermaid
flowchart LR
    subgraph strings["ğŸ“ å­—ç¬¦ä¸²"]
        String["String"] --> VARCHAR["varchar 255"]
    end
    
    subgraph numbers["ğŸ”¢ æ•°å€¼"]
        Integer["Integer"] --> INT["int"]
        Long["Long"] --> BIGINT["bigint"]
        BigDecimal["BigDecimal"] --> DECIMAL["decimal"]
    end
    
    subgraph dates["ğŸ“… æ—¥æœŸ"]
        LocalDateTime["LocalDateTime"] --> DATETIME["datetime"]
        LocalDate["LocalDate"] --> DATE["date"]
    end
    
    subgraph others["ğŸ“¦ å…¶ä»–"]
        Boolean["Boolean"] --> BIT["bit/boolean"]
        Enum["Enum"] --> ENUMSTR["varchar"]
    end

    style strings fill:#dbeafe,stroke:#3b82f6
    style numbers fill:#d1fae5,stroke:#10b981
    style dates fill:#fef3c7,stroke:#f59e0b
    style others fill:#fce7f3,stroke:#ec4899
```

| Java ç±»å‹ | MySQL | PostgreSQL | Oracle |
|-----------|-------|------------|--------|
| `String` | `varchar(255)` | `varchar(255)` | `varchar2(255)` |
| `Integer` / `int` | `int` | `integer` | `number(10)` |
| `Long` / `long` | `bigint` | `bigint` | `number(19)` |
| `Boolean` / `boolean` | `bit(1)` | `boolean` | `number(1)` |
| `Double` / `double` | `double` | `double precision` | `number` |
| `Float` / `float` | `float` | `real` | `number` |
| `BigDecimal` | `decimal(10,2)` | `numeric(10,2)` | `number(10,2)` |
| `Date` | `datetime` | `timestamp` | `date` |
| `LocalDateTime` | `datetime` | `timestamp` | `timestamp` |
| `LocalDate` | `date` | `date` | `date` |
| `LocalTime` | `time` | `time` | `timestamp` |
| `byte[]` | `blob` | `bytea` | `blob` |
| `Enum` | `varchar(255)` | `varchar(255)` | `varchar2(255)` |

### ç‰¹æ®Šç±»å‹

| Java ç±»å‹ | è¯´æ˜ |
|-----------|------|
| æšä¸¾ç±» | é»˜è®¤å­˜å‚¨æšä¸¾åç§°ï¼ˆStringï¼‰ï¼Œå¯è‡ªå®šä¹‰ |
| åµŒå¥—å¯¹è±¡ | ä¸æ”¯æŒï¼Œéœ€ `@Ignore` å¿½ç•¥ |
| é›†åˆç±»å‹ | ä¸æ”¯æŒï¼Œéœ€ `@Ignore` å¿½ç•¥ |

## è‡ªå®šä¹‰ç±»å‹

### ä½¿ç”¨ @ColumnType

```java
@Data
@AutoTable
public class Article {
    
    // æŒ‡å®šç±»å‹å’Œé•¿åº¦
    @ColumnType(value = "varchar", length = 100)
    private String title;
    
    // MySQL å¤§æ–‡æœ¬
    @ColumnType("longtext")
    private String content;
    
    // ç²¾ç¡®å°æ•°
    @ColumnType(value = "decimal", length = 18, decimalLength = 4)
    private BigDecimal price;
}
```

### ä½¿ç”¨ @AutoColumn

```java
@AutoColumn(type = "text", comment = "æ–‡ç« å†…å®¹")
private String content;
```

## æ•°æ®åº“ä¸“å±ç±»å‹

```mermaid
flowchart TB
    subgraph mysql["ğŸ¬ MySQL"]
        direction LR
        M_TEXT["TEXTç³»åˆ—"]
        M_INT["INTç³»åˆ—"]
        M_JSON["JSON"]
    end
    
    subgraph pgsql["ğŸ˜ PostgreSQL"]
        direction LR
        P_TEXT["TEXT"]
        P_JSON["JSON/JSONB"]
        P_UUID["UUID"]
    end
    
    subgraph oracle["ğŸ”¶ Oracle"]
        direction LR
        O_VARCHAR["VARCHAR2"]
        O_NUMBER["NUMBER"]
        O_CLOB["CLOB"]
    end

    style mysql fill:#dbeafe,stroke:#3b82f6
    style pgsql fill:#d1fae5,stroke:#10b981
    style oracle fill:#fef3c7,stroke:#f59e0b
```

### MySQL ç‰¹æœ‰ç±»å‹

```java
// MySQL ç±»å‹å¸¸é‡
import org.dromara.autotable.annotation.mysql.MysqlTypeConstant;

@ColumnType(MysqlTypeConstant.LONGTEXT)
private String content;

@ColumnType(MysqlTypeConstant.JSON)
private String jsonData;

@ColumnType(MysqlTypeConstant.TINYINT)
private Integer status;
```

å¸¸ç”¨ MySQL ç±»å‹ï¼š
- `TINYINT`, `SMALLINT`, `MEDIUMINT`, `INT`, `BIGINT`
- `FLOAT`, `DOUBLE`, `DECIMAL`
- `CHAR`, `VARCHAR`, `TEXT`, `MEDIUMTEXT`, `LONGTEXT`
- `DATE`, `DATETIME`, `TIMESTAMP`, `TIME`
- `BLOB`, `MEDIUMBLOB`, `LONGBLOB`
- `JSON`, `ENUM`, `SET`

### PostgreSQL ç‰¹æœ‰ç±»å‹

```java
import org.dromara.autotable.annotation.pgsql.PgsqlTypeConstant;

@ColumnType(PgsqlTypeConstant.TEXT)
private String content;

@ColumnType(PgsqlTypeConstant.JSONB)
private String jsonData;
```

## å¤šæ•°æ®åº“é€‚é…

å½“éœ€è¦åŒæ—¶æ”¯æŒå¤šç§æ•°æ®åº“æ—¶ï¼Œä½¿ç”¨ `@AutoColumns`ï¼š

```java
@AutoColumns({
    @AutoColumn(type = "longtext", dialect = "MySQL"),
    @AutoColumn(type = "text", dialect = "PostgreSQL"),
    @AutoColumn(type = "clob", dialect = "Oracle")
})
private String content;
```

## å…¨å±€ç±»å‹æ˜ å°„

### è‡ªå®šä¹‰è½¬æ¢å™¨

```mermaid
flowchart LR
    FIELD["Java Field"] --> CONVERTER["è‡ªå®šä¹‰Converter"]
    CONVERTER --> CHECK{"åŒ¹é…?"}
    CHECK -->|"æ˜¯"| CUSTOM["è‡ªå®šä¹‰ç±»å‹"]
    CHECK -->|"å¦"| DEFAULT["é»˜è®¤æ˜ å°„"]

    style CONVERTER fill:#6366f1,stroke:#4f46e5,color:#fff
    style CUSTOM fill:#d1fae5,stroke:#10b981
    style DEFAULT fill:#f3f4f6,stroke:#9ca3af
```

å®ç° `JavaTypeToDatabaseTypeConverter` æ¥å£ï¼š

```java
@Component
public class CustomTypeConverter implements JavaTypeToDatabaseTypeConverter {
    
    @Override
    public DatabaseTypeAndLength convert(String databaseDialect, 
                                         Class<?> fieldType, 
                                         Field field) {
        // MySQL ä¸‹ String é»˜è®¤ä½¿ç”¨ text
        if ("MySQL".equals(databaseDialect) && fieldType == String.class) {
            return new DatabaseTypeAndLength("text", null, null);
        }
        // è¿”å› null ä½¿ç”¨é»˜è®¤æ˜ å°„
        return null;
    }
}
```

### æ·»åŠ æ–°ç±»å‹æ˜ å°„

```java
// å¯åŠ¨æ—¶æ³¨å†Œ
JavaTypeToDatabaseTypeConverter.addTypeMapping(
    "MySQL",  // æ•°æ®åº“æ–¹è¨€
    Map.of(
        MyCustomType.class, MysqlTypeConstant.JSON
    )
);
```

## æšä¸¾ç±»å‹å¤„ç†

é»˜è®¤å­˜å‚¨æšä¸¾åç§°ï¼š

```java
public enum Status {
    ACTIVE, INACTIVE, DELETED
}

@AutoTable
public class User {
    private Status status;  // æ•°æ®åº“ï¼švarchar(255)ï¼Œå€¼ï¼šACTIVE
}
```

è‡ªå®šä¹‰æšä¸¾å€¼ï¼š

```java
// é€šè¿‡ ORM æ¡†æ¶çš„æšä¸¾å¤„ç†å™¨è‡ªå®šä¹‰
// å¦‚ Mybatis-Plus çš„ @EnumValue
```

## ä¸‹ä¸€æ­¥

- äº†è§£ [å¤šæ•°æ®æº](/æ ¸å¿ƒæ¦‚å¿µ/å¤šæ•°æ®æº) é…ç½®
- æŸ¥çœ‹å„ [æ•°æ®åº“é€‚é…](/æ•°æ®åº“é€‚é…/) çš„ç±»å‹è¯¦æƒ…
